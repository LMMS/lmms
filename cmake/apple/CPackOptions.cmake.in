# Supress license popup when opening DMG
unset(CPACK_RESOURCE_FILE_LICENSE)
# Disable strip, it causes missing symbols on macOS
set(CPACK_STRIP_FILES false)
set(CPACK_PACKAGE_FILE_NAME "${PROJECT_NAME}-${VERSION}")
set(CPACK_PRE_BUILD_SCRIPTS "${CMAKE_CURRENT_BINARY_DIR}/CPackPreBuild.cmake")
set(CPACK_DMG_VOLUME_NAME "${PROJECT_NAME_UCASE} ${VERSION}")
# tiff file is multi-resource (1x & 2x) created programatically using convert
execute_process(COMMAND convert "${CMAKE_CURRENT_SOURCE_DIR}/*.png" "${CMAKE_CURRENT_BINARY_DIR}/background.tiff")
set(CPACK_DMG_BACKGROUND_IMAGE "${CMAKE_CURRENT_BINARY_DIR}/background.tiff")
set(CPACK_DMG_DS_STORE "${CMAKE_CURRENT_SOURCE_DIR}/DS_Store")
set(CPACK_DMG_FILE "${CMAKE_BINARY_DIR}/${CMAKE_PROJECT_NAME}-${VERSION}-mac${APPLE_OS_VER}.dmg")