/* * TransferFunctionControlDialog.cpp - control dialog for TransferFunction effect */#include "TransferFunctionControlDialog.h"#include "TransferFunctionControls.h"#include "embed.h"#include "Knob.h"#include <QGridLayout>#include <QLineEdit> #include <QLabel> namespace lmms::gui{TransferFunctionControlDialog::TransferFunctionControlDialog(TransferFunctionControls* controls) :	EffectControlDialog(controls){	setAutoFillBackground(true);	QPalette pal;	pal.setBrush(backgroundRole(), PLUGIN_NAME::getIconPixmap("artwork"));	setPalette(pal);	// 1. MAKE IT WIDER AND TALLER	setMinimumWidth(700);	setMinimumHeight(300);	QGridLayout* gridLayout = new QGridLayout(this);		// --- LEFT COLUMN: CONTROLS ---	auto makeKnob = [this](const QString& label, const QString& hintText, const QString& unit, FloatModel* model, bool isVolume)	{		Knob* newKnob = new Knob(KnobType::Bright26, label, this);		newKnob->setModel(model);		newKnob->setHintText(hintText, unit);		return newKnob;	};	// Knob at (Row 0, Col 0)	gridLayout->addWidget(makeKnob(tr("PRESET"), tr("Preset ID"), "#", &controls->m_volumeModel, false), 0, 0, Qt::AlignHCenter);	// Text Box at (Row 1, Col 0)	// MADE BIGGER: Font size 14px, Padding 5px	QLineEdit* formulaBox = new QLineEdit(this);	formulaBox->setPlaceholderText("e.g. 1 / sqrt(1 + (freq/800)^2)");	formulaBox->setStyleSheet("background-color: #222; color: #0F0; border: 1px solid #555; font-family: Monospace; font-size: 14px; padding: 6px; margin-top: 15px;");	formulaBox->setText(controls->getFormula());	connect(formulaBox, &QLineEdit::textChanged, controls, &TransferFunctionControls::setFormula);		gridLayout->addWidget(formulaBox, 1, 0, Qt::AlignHCenter);	// --- RIGHT COLUMN: INFO TEXT ---	QLabel* infoLabel = new QLabel(this);		// CSS Styling for the text	infoLabel->setStyleSheet("color: #ccc; font-size: 11px; font-family: Monospace; background-color: rgba(0,0,0,100); padding: 10px; border-radius: 5px;");		// UPDATED TEXT WITH NEW SYNTAX	infoLabel->setText(		"<b>PRESETS:</b><br>"		"1:  CUSTOM (Use Box Below) &nbsp;&nbsp; 10: Comb Notch<br>"		"2:  Lowpass &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 11: Allpass<br>"		"3:  Highpass &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 12: Bitcrusher<br>"		"4:  Low Shelf &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 13: Spectral Decay<br>"		"5:  High Shelf &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 14: Gate Sweep<br>"		"6:  Telephone &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 15: Formants<br>"		"7:  Notch &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16: Odd Booster<br>"		"8:  Resonator &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 17: Phase Tilt<br>"		"9:  Comb<br>"		"<br>"		"<b>CUSTOM SYNTAX (Preset 1):</b><br>"		"Vars:  <i>freq</i> (Hz), <i>j</i> (Imaginary), <i>pi</i><br>"		"Math:  +, -, *, /, ^ (Power), ( )<br>"		"Funcs: sqrt, exp, sin, cos, abs, log<br>"		"Ex:    <code>1 / sqrt(1 + (freq/800)^2)</code>"	);	// Add Label at (Row 0, Col 1), Spanning 2 Rows	gridLayout->addWidget(infoLabel, 0, 1, 2, 1, Qt::AlignLeft);		// Adjust columns so the text area takes up more space	gridLayout->setColumnStretch(0, 4); // Controls slightly wider	gridLayout->setColumnStretch(1, 5); // Text area}} // namespace lmms::gui