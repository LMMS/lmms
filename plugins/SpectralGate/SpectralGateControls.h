#ifndef LMMS_SPECTRALGATE_CONTROLS_H#define LMMS_SPECTRALGATE_CONTROLS_H#include "EffectControls.h"#include <vector>#include <QString>namespace lmms{class SpectralGateEffect;// ============================================================// SpectralGateControls// ============================================================class SpectralGateControls : public EffectControls{    Q_OBJECTpublic:    SpectralGateControls(SpectralGateEffect* effect);    ~SpectralGateControls() override = default;    // Save/load to LMMS project XML    void saveSettings(QDomDocument& doc, QDomElement& parent) override;    void loadSettings(const QDomElement& parent) override;    gui::EffectControlDialog* createView() override;    // ------------------------------    // STEP PATTERN LOGIC    // ------------------------------    void setStep(int patternIdx, int stepIdx, bool active);    bool getStep(int patternIdx, int stepIdx) const;    bool getCurrentStep(int stepIdx) const;    // ------------------------------    // KNOB MODELS    // ------------------------------    // Gate Envelopes    FloatModel m_patternModel;    FloatModel m_smoothModel;    FloatModel m_swingModel;    FloatModel m_speedModel;    // Global DSP    FloatModel m_widthModel;  // NEW: Stereo Width    FloatModel m_decayModel;  // NEW: Spectral Feedback/Blur    // FFT Presets    FloatModel m_openPresetModel;    FloatModel m_closedPresetModel;    // 3-Band EQ - Open State    FloatModel m_openLowModel;    FloatModel m_openMidModel;    FloatModel m_openHighModel;    // 3-Band EQ - Closed State    FloatModel m_closedLowModel;    FloatModel m_closedMidModel;    FloatModel m_closedHighModel;    QString getOpenFormula() const  { return m_openFormulaString; }    QString getClosedFormula() const { return m_closedFormulaString; }    inline QString nodeName() const override { return "SpectralGateControls"; }    // Updated control count (12 + 2 new = 14)    int controlCount() override { return 14; }    // LED index for UI    void setRunIndex(int index);    int  runIndex() const { return m_runIndex; }public slots:    void setOpenFormula(const QString& text);    void setClosedFormula(const QString& text);signals:    void stepsChanged();    void runIndexChanged(int index);private:    SpectralGateEffect* m_effect;    std::vector<std::vector<bool>> m_patterns;    int m_runIndex = -1;    QString m_openFormulaString;    QString m_closedFormulaString;    friend class SpectralGateEffect;};} // namespace lmms#endif // LMMS_SPECTRALGATE_CONTROLS_H