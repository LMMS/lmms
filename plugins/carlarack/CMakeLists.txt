if(LMMS_HAVE_CARLA OR LMMS_HAVE_WEAKCARLA)
	ADD_DEFINITIONS(-DCARLA_PLUGIN_RACK -DCARLA_PLUGIN_SYNTH)
	INCLUDE(BuildPlugin)
	INCLUDE_DIRECTORIES(${CARLA_INCLUDE_DIRS} "${CMAKE_CURRENT_SOURCE_DIR}/../carlabase")
	LINK_DIRECTORIES("${CMAKE_CURRENT_BINARY_DIR}/../carlabase"
                          ${CARLA_LIBRARY_DIRS})
	LINK_LIBRARIES(carlabase)
	BUILD_PLUGIN(carlarack carlarack.cpp EMBEDDED_RESOURCES logo.png)
endif()
